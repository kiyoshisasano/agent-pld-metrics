<?xml version="1.0" encoding="UTF-8"?>
<svg
  xmlns="http://www.w3.org/2000/svg"
  width="1200"
  height="800"
  viewBox="0 0 1200 800"
>
  <style>
    .title       { font-family: system-ui, -apple-system, sans-serif; font-size: 24px; font-weight: 600; }
    .subtitle    { font-family: system-ui, -apple-system, sans-serif; font-size: 14px; fill: #555; }
    .card-title  { font-family: system-ui, -apple-system, sans-serif; font-size: 14px; font-weight: 600; }
    .card-main   { font-family: system-ui, -apple-system, sans-serif; font-size: 24px; font-weight: 600; }
    .card-sub    { font-family: system-ui, -apple-system, sans-serif; font-size: 12px; fill: #555; }
    .label       { font-family: system-ui, -apple-system, sans-serif; font-size: 13px; }
    .small       { font-family: system-ui, -apple-system, sans-serif; font-size: 11px; fill: #555; }
    .mono        { font-family: "SF Mono", "Roboto Mono", ui-monospace, monospace; font-size: 11px; }
    .table-head  { font-family: "SF Mono", "Roboto Mono", ui-monospace, monospace; font-size: 11px; font-weight: 600; }
    .table-cell  { font-family: "SF Mono", "Roboto Mono", ui-monospace, monospace; font-size: 11px; }

    .card-bg     { fill: #f8fafc; stroke: #e2e8f0; stroke-width: 1; rx: 8; ry: 8; }
    .panel-bg    { fill: #ffffff; stroke: #e2e8f0; stroke-width: 1; rx: 10; ry: 10; }
    .badge       { fill: #e2e8f0; rx: 4; ry: 4; }

    .phase-drift    { fill: #f97316; }  /* orange */
    .phase-repair   { fill: #3b82f6; }  /* blue */
    .phase-continue { fill: #22c55e; }  /* green */
    .phase-outcome  { fill: #6b7280; }  /* gray */
    .phase-none     { fill: #a855f7; }  /* purple */

    .axis-line   { stroke: #cbd5e1; stroke-width: 1; }
    .sep-line    { stroke: #e5e7eb; stroke-width: 1; stroke-dasharray: 4 4; }

    .marker-circle { stroke: #0f172a; stroke-width: 1; }
    .marker-diamond { stroke: #0f172a; stroke-width: 1; fill: #6b7280; }
    .marker-triangle { stroke: #0f172a; stroke-width: 1; fill: #a855f7; }

    .legend-box  { fill: #f9fafb; stroke: #e5e7eb; stroke-width: 1; rx: 6; ry: 6; }
  </style>

  <!-- Title -->
  <text x="40" y="50" class="title">
    PLD Operational Metrics Dashboard — Mockup
  </text>
  <text x="40" y="72" class="subtitle">
    Analytics-only visualization of PRDR / VRL / FR over PLD v2 runtime events
  </text>

  <!-- Metric summary cards ------------------------------------------------ -->
  <!-- Background panel -->
  <rect x="40" y="90" width="1120" height="120" class="panel-bg"/>

  <!-- PRDR card -->
  <rect x="60" y="110" width="250" height="80" class="card-bg"/>
  <text x="80" y="135" class="card-title">PRDR</text>
  <text x="80" y="155" class="card-main">33.3%</text>
  <text x="80" y="175" class="card-sub">
    Post-Repair Drift Recurrence · 1 / 3 sessions with repair
  </text>

  <!-- VRL card -->
  <rect x="330" y="110" width="250" height="80" class="card-bg"/>
  <text x="350" y="135" class="card-title">VRL</text>
  <text x="350" y="155" class="card-main">10.0 s</text>
  <text x="350" y="175" class="card-sub">
    Recovery Latency (mean) · 1 sample
  </text>

  <!-- FR card -->
  <rect x="600" y="110" width="250" height="80" class="card-bg"/>
  <text x="620" y="135" class="card-title">FR</text>
  <text x="620" y="155" class="card-main">0.0</text>
  <text x="620" y="175" class="card-sub">
    Failover Recurrence · 0 / 18 lifecycle events
  </text>

  <!-- Sessions card -->
  <rect x="870" y="110" width="250" height="80" class="card-bg"/>
  <text x="890" y="135" class="card-title">Sessions</text>
  <text x="890" y="155" class="card-main">3</text>
  <text x="890" y="175" class="card-sub">
    demo-fail-01 · demo-ok-01 · demo-metrics-01
  </text>

  <!-- Session timelines panel -------------------------------------------- -->
  <rect x="40" y="230" width="1120" height="260" class="panel-bg"/>
  <text x="60" y="255" class="label">Session timelines (turn_sequence / phase-aligned events)</text>

  <!-- Legend -->
  <rect x="940" y="240" width="200" height="100" class="legend-box"/>
  <text x="955" y="260" class="small">Legend</text>

  <!-- Legend items -->
  <!-- Drift -->
  <circle cx="965" cy="280" r="6" class="phase-drift marker-circle"/>
  <text x="980" y="284" class="small">drift (D* codes · drift_detected / drift_escalated)</text>
  <!-- Repair -->
  <circle cx="965" cy="300" r="6" class="phase-repair marker-circle"/>
  <text x="980" y="304" class="small">repair (R* codes · repair_triggered / repair_escalated)</text>
  <!-- Continue -->
  <circle cx="965" cy="320" r="6" class="phase-continue marker-circle"/>
  <text x="980" y="324" class="small">continue (C* codes · continue_allowed / blocked)</text>
  <!-- Outcome / Session closed -->
  <rect x="959" y="334" width="12" height="12" transform="rotate(45 965 340)" class="marker-diamond"/>
  <text x="980" y="344" class="small">outcome (O* codes · session_closed)</text>

  <!-- Axes definition -->
  <!-- We'll map turns 1..8 to x positions 200..900 -->
  <!-- demo-fail-01 -------------------------------------------------------- -->
  <text x="60" y="290" class="label">demo-fail-01 (closed)</text>
  <!-- horizontal axis -->
  <line x1="200" y1="290" x2="900" y2="290" class="axis-line"/>

  <!-- axis ticks for turns 1..8 -->
  <!-- simple short ticks + labels -->
  <g class="small">
    <line x1="200" y1="286" x2="200" y2="294" stroke="#94a3b8" stroke-width="1"/>
    <text x="196" y="305">1</text>

    <line x1="260" y1="286" x2="260" y2="294" stroke="#94a3b8" stroke-width="1"/>
    <text x="256" y="305">2</text>

    <line x1="320" y1="286" x2="320" y2="294" stroke="#94a3b8" stroke-width="1"/>
    <text x="316" y="305">3</text>

    <line x1="380" y1="286" x2="380" y2="294" stroke="#94a3b8" stroke-width="1"/>
    <text x="376" y="305">4</text>

    <line x1="440" y1="286" x2="440" y2="294" stroke="#94a3b8" stroke-width="1"/>
    <text x="436" y="305">5</text>

    <line x1="500" y1="286" x2="500" y2="294" stroke="#94a3b8" stroke-width="1"/>
    <text x="496" y="305">6</text>

    <line x1="560" y1="286" x2="560" y2="294" stroke="#94a3b8" stroke-width="1"/>
    <text x="556" y="305">7</text>

    <line x1="620" y1="286" x2="620" y2="294" stroke="#94a3b8" stroke-width="1"/>
    <text x="616" y="305">8</text>
  </g>

  <!-- demo-fail-01 events -->
  <!-- T1: continue_allowed · continue -->
  <circle cx="200" cy="290" r="8" class="phase-continue marker-circle"/>
  <text x="190" y="270" class="small">C0_user_turn</text>

  <!-- T2: drift_detected · drift -->
  <circle cx="260" cy="290" r="8" class="phase-drift marker-circle"/>
  <text x="248" y="270" class="small">D4_tool_error</text>

  <!-- T3–T7: repair_triggered · repair -->
  <circle cx="320" cy="290" r="7" class="phase-repair marker-circle"/>
  <circle cx="380" cy="290" r="7" class="phase-repair marker-circle"/>
  <circle cx="440" cy="290" r="7" class="phase-repair marker-circle"/>
  <circle cx="500" cy="290" r="7" class="phase-repair marker-circle"/>
  <circle cx="560" cy="290" r="7" class="phase-repair marker-circle"/>
  <text x="332" y="270" class="small">R2_soft_repair ×5</text>

  <!-- T8: session_closed · outcome -->
  <rect x="614" y="284" width="12" height="12" transform="rotate(45 620 290)" class="marker-diamond"/>
  <text x="632" y="290" class="small">O0_session_closed (max_retries)</text>

  <!-- separator -->
  <line x1="60" y1="320" x2="900" y2="320" class="sep-line"/>

  <!-- demo-ok-01 ---------------------------------------------------------- -->
  <text x="60" y="350" class="label">demo-ok-01 (closed)</text>
  <line x1="200" y1="350" x2="900" y2="350" class="axis-line"/>

  <!-- ticks 1..6 (reusing positions 1..6) -->
  <g class="small">
    <line x1="200" y1="346" x2="200" y2="354" stroke="#94a3b8" stroke-width="1"/>
    <text x="196" y="365">1</text>

    <line x1="260" y1="346" x2="260" y2="354" stroke="#94a3b8" stroke-width="1"/>
    <text x="256" y="365">2</text>

    <line x1="320" y1="346" x2="320" y2="354" stroke="#94a3b8" stroke-width="1"/>
    <text x="316" y="365">3</text>

    <line x1="380" y1="346" x2="380" y2="354" stroke="#94a3b8" stroke-width="1"/>
    <text x="376" y="365">4</text>

    <line x1="440" y1="346" x2="440" y2="354" stroke="#94a3b8" stroke-width="1"/>
    <text x="436" y="365">5</text>

    <line x1="500" y1="346" x2="500" y2="354" stroke="#94a3b8" stroke-width="1"/>
    <text x="496" y="365">6</text>
  </g>

  <!-- events -->
  <!-- T1: continue_allowed -->
  <circle cx="200" cy="350" r="8" class="phase-continue marker-circle"/>
  <text x="188" y="330" class="small">C0_user_turn</text>

  <!-- T2: drift_detected -->
  <circle cx="260" cy="350" r="8" class="phase-drift marker-circle"/>
  <text x="248" y="330" class="small">D1_instruction</text>

  <!-- T3: repair_triggered -->
  <circle cx="320" cy="350" r="8" class="phase-repair marker-circle"/>
  <text x="308" y="330" class="small">R1_clarify</text>

  <!-- T4: continue_allowed (recovery) -->
  <circle cx="380" cy="350" r="8" class="phase-continue marker-circle"/>
  <text x="366" y="330" class="small">C0_system_turn</text>

  <!-- T5: latency_spike (INFO, phase=none) -->
  <polygon points="440,342 448,358 432,358" class="marker-triangle"/>
  <text x="452" y="352" class="small">INFO_latency_spike</text>

  <!-- T6: session_closed -->
  <rect x="494" y="344" width="12" height="12" transform="rotate(45 500 350)" class="marker-diamond"/>
  <text x="512" y="350" class="small">O0_session_closed</text>

  <!-- separator -->
  <line x1="60" y1="380" x2="900" y2="380" class="sep-line"/>

  <!-- demo-metrics-01 ----------------------------------------------------- -->
  <text x="60" y="410" class="label">demo-metrics-01 (closed · PRDR demo)</text>
  <line x1="200" y1="410" x2="900" y2="410" class="axis-line"/>

  <!-- ticks 1..6 -->
  <g class="small">
    <line x1="200" y1="406" x2="200" y2="414" stroke="#94a3b8" stroke-width="1"/>
    <text x="196" y="425">1</text>

    <line x1="260" y1="406" x2="260" y2="414" stroke="#94a3b8" stroke-width="1"/>
    <text x="256" y="425">2</text>

    <line x1="320" y1="406" x2="320" y2="414" stroke="#94a3b8" stroke-width="1"/>
    <text x="316" y="425">3</text>

    <line x1="380" y1="406" x2="380" y2="414" stroke="#94a3b8" stroke-width="1"/>
    <text x="376" y="425">4</text>

    <line x1="440" y1="406" x2="440" y2="414" stroke="#94a3b8" stroke-width="1"/>
    <text x="436" y="425">5</text>

    <line x1="500" y1="406" x2="500" y2="414" stroke="#94a3b8" stroke-width="1"/>
    <text x="496" y="425">6</text>
  </g>

  <!-- events -->
  <!-- T1: continue_allowed -->
  <circle cx="200" cy="410" r="8" class="phase-continue marker-circle"/>
  <text x="186" y="390" class="small">C0_normal</text>

  <!-- T2: drift_detected -->
  <circle cx="260" cy="410" r="8" class="phase-drift marker-circle"/>
  <text x="248" y="390" class="small">D3_repeated_plan</text>

  <!-- T3: repair_triggered -->
  <circle cx="320" cy="410" r="8" class="phase-repair marker-circle"/>
  <text x="310" y="390" class="small">R2_soft_repair</text>

  <!-- T4: drift_detected (post-repair recurrence) -->
  <circle cx="380" cy="410" r="9" class="phase-drift marker-circle"/>
  <text x="366" y="390" class="small">D3_repeated_plan (recurrence)</text>

  <!-- T5: info (M1_PRDR · phase=none) -->
  <circle cx="440" cy="410" r="8" class="phase-none marker-circle"/>
  <text x="430" y="390" class="small">M1_PRDR (derived metric)</text>

  <!-- T6: session_closed -->
  <rect x="494" y="404" width="12" height="12" transform="rotate(45 500 410)" class="marker-diamond"/>
  <text x="512" y="410" class="small">O0_session_closed</text>

  <!-- Session details panel ----------------------------------------------- -->
  <rect x="40" y="510" width="1120" height="260" class="panel-bg"/>
  <text x="60" y="535" class="label">Session details (text-mode view · mirrors examples/dashboard/app.py)</text>

  <!-- Badge for selected session -->
  <rect x="60" y="545" width="230" height="24" class="badge"/>
  <text x="70" y="562" class="small">Selected session: demo-metrics-01</text>

  <!-- Table header -->
  <text x="60"  y="580" class="table-head">turn</text>
  <text x="110" y="580" class="table-head">timestamp</text>
  <text x="270" y="580" class="table-head">event_type</text>
  <text x="400" y="580" class="table-head">phase</text>
  <text x="470" y="580" class="table-head">code</text>

  <!-- Separator line -->
  <line x1="60" y1="585" x2="1120" y2="585" class="axis-line"/>

  <!-- Rows for demo-metrics-01 (compact) -->
  <!-- turn 1 -->
  <text x="60"  y="605" class="table-cell">1</text>
  <text x="110" y="605" class="table-cell">2025-01-15T12:00:00Z</text>
  <text x="270" y="605" class="table-cell">continue_allowed</text>
  <text x="400" y="605" class="table-cell">continue</text>
  <text x="470" y="605" class="table-cell">C0_normal</text>

  <!-- turn 2 -->
  <text x="60"  y="625" class="table-cell">2</text>
  <text x="110" y="625" class="table-cell">2025-01-15T12:00:05Z</text>
  <text x="270" y="625" class="table-cell">drift_detected</text>
  <text x="400" y="625" class="table-cell">drift</text>
  <text x="470" y="625" class="table-cell">D3_repeated_plan</text>

  <!-- turn 3 -->
  <text x="60"  y="645" class="table-cell">3</text>
  <text x="110" y="645" class="table-cell">2025-01-15T12:00:10Z</text>
  <text x="270" y="645" class="table-cell">repair_triggered</text>
  <text x="400" y="645" class="table-cell">repair</text>
  <text x="470" y="645" class="table-cell">R2_soft_repair</text>

  <!-- turn 4 -->
  <text x="60"  y="665" class="table-cell">4</text>
  <text x="110" y="665" class="table-cell">2025-01-15T12:00:15Z</text>
  <text x="270" y="665" class="table-cell">drift_detected</text>
  <text x="400" y="665" class="table-cell">drift</text>
  <text x="470" y="665" class="table-cell">D3_repeated_plan</text>

  <!-- turn 5 -->
  <text x="60"  y="685" class="table-cell">5</text>
  <text x="110" y="685" class="table-cell">2025-01-15T12:00:20Z</text>
  <text x="270" y="685" class="table-cell">info</text>
  <text x="400" y="685" class="table-cell">none</text>
  <text x="470" y="685" class="table-cell">M1_PRDR</text>

  <!-- turn 6 -->
  <text x="60"  y="705" class="table-cell">6</text>
  <text x="110" y="705" class="table-cell">2025-01-15T12:00:25Z</text>
  <text x="270" y="705" class="table-cell">session_closed</text>
  <text x="400" y="705" class="table-cell">outcome</text>
  <text x="470" y="705" class="table-cell">O0_session_closed</text>

  <!-- Footnote / spec alignment note ------------------------------------- -->
  <text x="60" y="740" class="small">
    This dashboard mockup operates at the analytics layer only. It visualizes PRDR / VRL / FR
    over PLD v2-compliant events without modifying schema, taxonomy, or lifecycle semantics.
    M-prefix codes (e.g., M1_PRDR) are derived metric markers emitted as info events (phase=none).
  </text>
</svg>
