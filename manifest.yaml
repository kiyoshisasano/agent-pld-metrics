# manifest.yaml
# PLD Repository Metadata Manifest (Refactored)
# Format spec: METADATA_MANIFEST_SPEC v0.9.1
# SPDX-License-Identifier: Apache-2.0
#
# Refactoring Policy:
#   - authority_level 1-3: Grouped by directory (Implicit Grouping)
#   - authority_level 4-5: Individual entries (Explicit Definition)
#   - pld_runtime/*: Always individual entries regardless of authority_level

version: 0.9.1
default_license: Apache-2.0

components:

  # ---------------------------------------------------------
  # 0. Adoption & Communication (Implicit Grouping)
  # ---------------------------------------------------------

  - path: pitch/
    component_id: pitch_kit
    kind: doc
    area: adoption
    status: candidate
    authority_level: 1
    version: 0.1.0
    license: CC-BY-4.0
    purpose: >
      Communication and adoption materials intended to help product teams,
      engineering leadership, and decision-makers understand the value and role
      of PLD in stabilizing multi-turn AI systems.
    feedback: "Feedback from implementers and internal advocates is encouraged."

  # ---------------------------------------------------------
  # 1. Meta & Governance
  # ---------------------------------------------------------

  # --- Root-level Documents (Grouped) ---
  - path: root_meta/
    component_id: root_meta_docs
    kind: doc
    area: meta
    status: stable
    authority_level: 2
    purpose: >
      Root-level supplementary documents including README.md, SUMMARY.md,
      SUMMARY.svg, README_model.svg, and CONTRIBUTING.md.
    includes:
      - README.md
      - SUMMARY.md
      - SUMMARY.svg
      - README_model.svg
      - CONTRIBUTING.md

  # --- Governance Documents (authority_level 5 - Individual) ---
  - path: meta/CHANGELOG.md
    component_id: changelog
    kind: doc
    area: meta
    status: stable
    authority_level: 5
    purpose: Official change history for the PLD repository and runtime ecosystem.

  - path: meta/METADATA_MANIFEST_SPEC.md
    component_id: manifest_spec
    kind: doc
    area: meta
    status: candidate
    authority_level: 5
    purpose: Governing specification for PLD metadata and manifest structure.

  - path: meta/VERSIONING_POLICY.md
    component_id: versioning_policy
    kind: doc
    area: meta
    status: stable
    authority_level: 5
    purpose: Versioning rules and governance policy for schemas, runtime modules, and specifications.

  # --- Roadmap (authority_level 3 - Grouped with meta/) ---
  - path: meta/supplementary/
    component_id: meta_supplementary_docs
    kind: doc
    area: meta
    status: draft
    authority_level: 3
    purpose: Supplementary meta documents including roadmap and future plans.
    includes:
      - ROADMAP.md

  # --- Legal Documents (authority_level 5 - Individual) ---
  - path: LICENSES/LICENSE-APACHE-2.0.txt
    component_id: license_apache_2_0
    kind: legal
    area: compliance
    status: stable
    authority_level: 5
    purpose: Primary open-source license governing repository use and redistribution.

  - path: LICENSES/LICENSE-CC-BY-4.0.txt
    component_id: license_cc_by_4_0
    kind: legal
    area: compliance
    status: stable
    authority_level: 5
    purpose: Additional content license covering documentation, examples, and derivative works.

  - path: LICENSES/NOTICE.txt
    component_id: legal_notice
    kind: legal
    area: compliance
    status: stable
    authority_level: 5
    purpose: Required legal notice for compliance with open-source redistribution requirements.

  - path: LICENSES/TRADEMARK_POLICY.md
    component_id: trademark_policy
    kind: legal
    area: compliance
    status: stable
    authority_level: 5
    purpose: Trademark usage restrictions and authorized usage scope for the PLD name and branding.

  # --- Legal Supplementary (authority_level 3 - Grouped) ---
  - path: LICENSES/supplementary/
    component_id: licenses_supplementary
    kind: doc
    area: compliance
    status: stable
    authority_level: 3
    purpose: Supplementary licensing documents including citation reference and license overview.
    includes:
      - citation.bib
      - LICENSES.md

  # --- Project Configuration (New Files) ---
  - path: pyproject.toml
    component_id: pyproject_config
    kind: config
    area: meta
    status: stable
    authority_level: 3
    purpose: Python project packaging configuration.

  - path: requirements.txt
    component_id: requirements_file
    kind: config
    area: meta
    status: stable
    authority_level: 3
    purpose: Python package dependencies.

  - path: MANIFEST.in
    component_id: manifest_in_config
    kind: config
    area: meta
    status: stable
    authority_level: 3
    purpose: Packaging inclusion rules.

  - path: .gitignore
    component_id: gitignore
    kind: config
    area: meta
    status: stable
    authority_level: 1
    purpose: Git exclusion rules.

  - path: .github/workflows/
    component_id: github_workflows
    kind: config
    area: meta
    status: stable
    authority_level: 3
    purpose: GitHub Actions workflow definitions (CI/CD).

  - path: tests/
    component_id: tests_directory
    kind: code
    area: test
    status: experimental
    authority_level: 1
    purpose: Placeholder directory for future unit tests.

  # ---------------------------------------------------------
  # 2. Documentation & Architecture (Implicit Grouping)
  # ---------------------------------------------------------

  - path: docs/metrics/
    component_id: docs_metrics
    kind: doc
    area: metrics
    status: draft
    authority_level: 3
    version: 2.0.0
    license: CC-BY-4.0
    purpose: >
      Metrics documentation including operational cookbook, dashboard mockups,
      and visualization assets.

  - path: docs/concepts/
    component_id: docs_concepts
    kind: doc
    area: concepts
    status: candidate
    authority_level: 3
    version: 2.0.0
    license: CC-BY-4.0
    purpose: >
      Conceptual documentation covering PLD introduction, drift-repair model,
      repair strategies, reference maps, and operator primitives.

  - path: docs/patterns/
    component_id: docs_patterns
    kind: doc
    area: quickstart_patterns
    status: draft
    authority_level: 3
    version: 2.0.0
    license: CC-BY-4.0
    purpose: >
      LLM pattern documentation including foundations, state transitions,
      drift responses, repair templates, reentry alignment, and tool response rules.

  # ---------------------------------------------------------
  # 3. PLD Runtime Core (Explicit Definition - All Individual)
  # ---------------------------------------------------------

  - path: pld_runtime/README.md
    component_id: pld_runtime_readme
    kind: doc
    area: runtime
    status: stable
    authority_level: 5
    purpose: Entry-point documentation for the PLD runtime directory.

  # --- schemas ---
  - path: pld_runtime/schemas/runtime_event_envelope.json
    component_id: runtime_event_envelope_json
    kind: schema
    area: runtime_schema
    status: stable
    authority_level: 5
    purpose: JSON schema definition for the PLD Event Envelope.

  - path: pld_runtime/schemas/runtime_event_envelope.ops.md
    component_id: runtime_event_envelope_ops
    kind: doc
    area: schema
    status: candidate
    authority_level: 5
    version: 2.0.0
    purpose: Operational guidance for emitting, validating, transporting, and observing PLD runtime events.

  - path: pld_runtime/schemas/runtime_event_envelope.examples.md
    component_id: runtime_event_envelope_examples
    kind: doc
    area: schema
    status: candidate
    authority_level: 5
    version: 2.0.0
    purpose: Runtime event envelope examples for operational reference.

  - path: pld_runtime/schemas/runtime_event_envelope.notes.md
    component_id: runtime_event_envelope_notes
    kind: doc
    area: schema
    status: draft
    authority_level: 5
    version: 2.0.0
    purpose: Operational companion reference for the PLD runtime event envelope.

  # --- ingestion ---
  - path: pld_runtime/ingestion/ingestion_config.py
    component_id: ingestion_config
    kind: config
    area: ingestion
    status: experimental
    authority_level: 3
    purpose: Configuration for data ingestion pipelines.

  - path: pld_runtime/ingestion/multiwoz_loader.py
    component_id: multiwoz_loader
    kind: runtime_module
    area: ingestion
    status: experimental
    authority_level: 2
    purpose: Loader for MultiWOZ dataset adaptation.

  - path: pld_runtime/ingestion/normalization.py
    component_id: normalization
    kind: runtime_module
    area: ingestion
    status: stable
    authority_level: 4
    purpose: Normalizes input signals into PLD format.

  - path: pld_runtime/ingestion/simple_observer.py
    component_id: simple_observer
    kind: runtime_module
    area: ingestion
    status: experimental
    authority_level: 5
    version: 2.0.0
    license: Apache-2.0
    purpose: High-level facade over RuntimeSignalBridge and StructuredLogger.

  # --- detection ---
  - path: pld_runtime/detection/drift_detector.py
    component_id: drift_detector
    kind: runtime_module
    area: detection
    status: experimental
    authority_level: 5
    purpose: Core logic for detecting conversation drift.

  - path: pld_runtime/detection/repair_detector.py
    component_id: repair_detector
    kind: runtime_module
    area: detection
    status: experimental
    authority_level: 5
    purpose: Identifies repair sequences.

  - path: pld_runtime/detection/pattern_classifier.py
    component_id: pattern_classifier
    kind: runtime_module
    area: detection
    status: experimental
    authority_level: 4
    purpose: Classifies detected patterns against the taxonomy.

  - path: pld_runtime/detection/runtime_signal_bridge.py
    component_id: runtime_signal_bridge
    kind: runtime_module
    area: detection
    status: stable
    authority_level: 5
    purpose: Bridges raw signals to runtime events.

  - path: pld_runtime/detection/builtin_detectors.py
    component_id: builtin_detectors
    kind: runtime_module
    area: detection
    status: experimental
    authority_level: 5
    purpose: Built-in detectors for keyword- and schema-based drift.

  # --- enforcement ---
  - path: pld_runtime/enforcement/response_policy.py
    component_id: response_policy
    kind: runtime_module
    area: enforcement
    status: draft
    authority_level: 5
    purpose: Map PLD runtime events to advisory response policy.

  - path: pld_runtime/enforcement/schema_validator.py
    component_id: schema_validator
    kind: runtime_module
    area: enforcement
    status: draft
    authority_level: 5
    purpose: Validate PLD runtime events against Level 1 schema.

  - path: pld_runtime/enforcement/sequence_rules.py
    component_id: sequence_rules
    kind: runtime_module
    area: enforcement
    status: draft
    authority_level: 5
    purpose: Evaluate ordering constraints in runtime event sequences.

  - path: pld_runtime/enforcement/thresholds.py
    component_id: enforcement_thresholds
    kind: runtime_module
    area: enforcement
    status: draft
    authority_level: 5
    purpose: Threshold templates for runtime enforcement.

  # --- controllers ---
  - path: pld_runtime/controllers/pld_controller.py
    component_id: pld_controller
    kind: runtime_module
    area: controller
    status: experimental
    authority_level: 4
    purpose: Main runtime loop controller.

  - path: pld_runtime/controllers/action_router.py
    component_id: action_router
    kind: runtime_module
    area: controller
    status: experimental
    authority_level: 4
    purpose: Routes controller decisions to execution modules.

  - path: pld_runtime/controllers/controller_config.py
    component_id: controller_config
    kind: config
    area: controller
    status: experimental
    authority_level: 3
    purpose: Configuration for the runtime controller.

  - path: pld_runtime/controllers/state_machine.py
    component_id: state_machine
    kind: runtime_module
    area: controller
    status: experimental
    authority_level: 5
    purpose: Manages state transitions (Drift -> Repair -> Reentry).

  # --- logging ---
  - path: pld_runtime/logging/runtime_logging_pipeline.py
    component_id: logging_pipeline
    kind: runtime_module
    area: logging
    status: stable
    authority_level: 3
    purpose: Structured logging pipeline.

  - path: pld_runtime/logging/event_writer.py
    component_id: event_writer
    kind: runtime_module
    area: logging
    status: stable
    authority_level: 3
    purpose: Writes validated events to storage.

  - path: pld_runtime/logging/logging_config.py
    component_id: logging_config
    kind: config
    area: logging
    status: stable
    authority_level: 3
    purpose: Configuration for logging levels and outputs.

  - path: pld_runtime/logging/session_trace_buffer.py
    component_id: session_trace_buffer
    kind: runtime_module
    area: logging
    status: experimental
    authority_level: 4
    purpose: Buffers session events for trace assembly.

  - path: pld_runtime/logging/structured_logger.py
    component_id: structured_logger
    kind: runtime_module
    area: logging
    status: stable
    authority_level: 3
    purpose: Core logger implementation.

  - path: pld_runtime/logging/exporters/exporter_jsonl.py
    component_id: exporter_jsonl
    kind: runtime_module
    area: logging
    status: stable
    authority_level: 3
    purpose: Exports logs to JSONL format.

  - path: pld_runtime/logging/exporters/exporter_open_telemetry.py
    component_id: exporter_open_telemetry
    kind: runtime_module
    area: logging
    status: experimental
    authority_level: 3
    purpose: Exports logs via OpenTelemetry.

  # --- failover ---
  - path: pld_runtime/failover/runtime_failover.py
    component_id: runtime_failover
    kind: runtime_module
    area: failover
    status: experimental
    authority_level: 5
    purpose: Manages failover logic when runtime errors occur.

  - path: pld_runtime/failover/backoff_policies.py
    component_id: backoff_policies
    kind: runtime_module
    area: failover
    status: experimental
    authority_level: 4
    purpose: Defines retry and backoff strategies.

  - path: pld_runtime/failover/reconciliation.py
    component_id: reconciliation
    kind: runtime_module
    area: failover
    status: experimental
    authority_level: 5
    purpose: Reconciles state after failover.

  - path: pld_runtime/failover/strategy_registry.py
    component_id: strategy_registry
    kind: runtime_module
    area: failover
    status: experimental
    authority_level: 4
    purpose: Registry for failover strategies.

  # --- Package Initializers (authority_level 5 - Individual) ---
  - path: pld_runtime/__init__.py
    component_id: pld_runtime_public_api
    kind: runtime_module
    area: api
    status: stable
    authority_level: 5
    purpose: Public API surface for PLD Runtime v2.0.

  - path: pld_runtime/schemas/__init__.py
    component_id: schemas_pkg_init
    kind: code
    area: schema
    status: stable
    authority_level: 5
    purpose: Package initialization for schemas.

  - path: pld_runtime/ingestion/__init__.py
    component_id: ingestion_pkg_init
    kind: code
    area: ingestion
    status: stable
    authority_level: 5
    purpose: Package initialization for ingestion.

  - path: pld_runtime/detection/__init__.py
    component_id: detection_pkg_init
    kind: code
    area: detection
    status: stable
    authority_level: 5
    purpose: Package initialization for detection.

  - path: pld_runtime/enforcement/__init__.py
    component_id: enforcement_pkg_init
    kind: code
    area: enforcement
    status: stable
    authority_level: 5
    purpose: Package initialization for enforcement.

  - path: pld_runtime/controllers/__init__.py
    component_id: controllers_pkg_init
    kind: code
    area: controller
    status: stable
    authority_level: 5
    purpose: Package initialization for controllers.

  - path: pld_runtime/logging/__init__.py
    component_id: logging_pkg_init
    kind: code
    area: logging
    status: stable
    authority_level: 5
    purpose: Package initialization for logging.

  - path: pld_runtime/logging/exporters/__init__.py
    component_id: exporters_pkg_init
    kind: code
    area: logging
    status: stable
    authority_level: 5
    purpose: Package initialization for logging exporters.

  - path: pld_runtime/failover/__init__.py
    component_id: failover_pkg_init
    kind: code
    area: failover
    status: stable
    authority_level: 5
    purpose: Package initialization for failover.

  # ---------------------------------------------------------
  # 4. Quickstart (Implicit Grouping)
  # ---------------------------------------------------------

  - path: quickstart/
    component_id: quickstart_examples
    kind: example
    area: quickstart
    status: experimental
    authority_level: 1
    version: 2.0.0
    license: Apache-2.0
    purpose: >
      Quickstart examples and demos including hello_pld_runtime.py,
      run_minimal_engine.py, minimal_pld_demo.py, easy_pld_demo.py,
      metrics_quickcheck/, and dashboard configurations.

  # ---------------------------------------------------------
  # 5. Examples (Implicit Grouping)
  # ---------------------------------------------------------

  - path: examples/
    component_id: examples_collection
    kind: example
    area: examples
    status: experimental
    authority_level: 2
    version: 2.0.0
    license: Apache-2.0
    purpose: >
      Integration examples and reference traces including LangGraph assistants
      integration, reference trace generators, forensic traces, golden semantic
      repair traces, and metrics dashboard app.

  # ---------------------------------------------------------
  # 6. Works in Progress / Pending Update (Implicit Grouping)
  # ---------------------------------------------------------
  # These directories are currently being refactored for V2.0.
  # Content may be mixed between V1.0 (legacy) and V2.0 (draft).

  - path: analytics/
    component_id: analytics_suite_wip
    kind: metric
    area: analytics
    status: experimental
    authority_level: 2
    purpose: >
      Analytics tools, frameworks, and datasets.
      Currently under refactoring to align with PLD V2.0 metrics standards.

  - path: governance/
    component_id: governance_legacy
    kind: doc
    area: meta
    status: stable
    authority_level: 5
    purpose: >
      Governance protocols, onboarding guides, and PoC standards.
      Current contents reflect V1.0 stability; V2.0 updates are pending.

  # --- Pending Documentation Sub-directories ---
  # Note: metrics, concepts, and patterns are already defined in Section 2.

  - path: docs/architecture/
    component_id: docs_architecture_wip
    kind: doc
    area: architecture
    status: draft
    authority_level: 3
    purpose: >
      Architectural layering and implementation rules.
      Pending update for V2.0 Runtime alignment.

  - path: docs/specifications/
    component_id: docs_specifications_wip
    kind: doc
    area: schema
    status: draft
    authority_level: 4
    purpose: >
      Level 1 and Level 2 specifications (Schema & Semantics).
      Pending formalization of V2.0 artifacts.
